<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>neuropacs™ JavaScript API</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-content">
        <div class="header-text">
          <h1>neuropacs™ JavaScript API</h1>
          <p>
            Our JavaScript API enables seamless integration with our product's
            capabilities in any JavaScript-based environment.
          </p>
        </div>
      </div>
    </header>

    <nav class="navbar">
      <ul>
        <li><a href="https://neuropacs.github.io/">Home</a></li>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#dicom-web">DICOMweb</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#license">License</a></li>
        <li><a href="#explore">Explore</a></li>

        <!-- <li><a href="#faq">FAQ</a></li> -->
      </ul>
    </nav>

    <div class="image-row">
      <a href="https://github.com/neuropacs/neuropacs-js-api"
        ><img src="./resources/github_logo.png"
      /></a>
    </div>

    <main class="main-content">
      <section id="installation">
        <h2>Installation</h2>
        <h3>Available bundles:</h3>
        <table class="info-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Size</th>
              <th>Description</th>
              <th>URL</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>neuropacs.js</td>
              <td>36.5KB</td>
              <td>Unminified version, with debug</td>
              <td>https://d3tequ3xv41td3.cloudfront.net/js/neuropacs.js</td>
            </tr>
            <tr>
              <td>neuropacs.min.js</td>
              <td>13KB</td>
              <td>Production version, without debug</td>
              <td>https://d3tequ3xv41td3.cloudfront.net/js/neuropacs.min.js</td>
            </tr>
            <tr>
              <td>neuropacs.module.js</td>
              <td>13KB</td>
              <td>Production version, without debug, module</td>
              <td>
                https://d3tequ3xv41td3.cloudfront.net/js/neuropacs.module.js
              </td>
            </tr>
          </tbody>
        </table>
        <h3>Include in project</h3>
        <ul>
          <p><strong>Option 1:</strong> Download and include locally</p>
          <ol>
            <li>Download preferred bundle (via 'wget' or manually)</li>
            <li>
              Include bundle file in project
              <ul>
                <li>Your project structure should look like this:</li>
              </ul>
            </li>
            <pre class="code-container">
    project-root/
    |-- src/
    | |-- index.html
    |-- lib/
    | |--neuropacs.min.js<code class="language-shell"></code></pre>
          </ol>
        </ul>
        <p><strong>Option 2:</strong> Import via CDN</p>
        <ol>
          <li>Include this script tag within your html file:</li>
          <pre
            class="code-container"
          ><code class="language-shell"><p>&lt;<span class="code-comment">script</span> src=<span class="code-string">"https://d22wr27dw196a9.cloudfront.net/neuropacs.min.js"</span>&gt;&lt;/<span class="code-comment">script</span>&gt;</p></code></pre>
        </ol>
      </section>

      <section id="usage">
        <h2>Usage</h2>
        <div class="code-section">
          <h3>Initialization</h3>
          <p>Initalize the neuropacs™ API.</p>
          <pre class="code-container"><code class="language-shell">
  <span class="code-comment">// Define neuropacs parameters</span>
  <span class="code-keyword">const</span> apiKey = <span class="code-string">"your_api_key"</span> <span class="code-comment"># API key</span>
  <span class="code-keyword">const</span> serverUrl = <span class="code-string">"server_url"</span> <span class="code-comment"># neuropacs™ serverl URL</span>
  <span class="code-keyword">const</span> productName = <span class="code-string">"Atypical/MSAp/PSP-v1.0"</span> <span class="code-comment"># Desired neuropacs™ product</span>
  <span class="code-keyword">const</span> predictionFormat = <span class="code-string">"JSON"</span> <span class="code-comment"># Output format of results</span>
  <span class="code-keyword">const</span> originType = <span class="code-string">"my_application"</span> <span class="code-comment"># Requestor origin</span>

  <span class="code-comment">// Initialize the API</span>
  <span class="code-keyword">const</span> npcs = Neuropacs.<span class="code-function">init</span>({
      serverUrl: serverUrl,
      apiKey: apiKey,
      originType: originType
    });
          </code></pre>
        </div>

        <div class="code-section">
          <h3>Example</h3>
          <p>Working example using the neuropacs™ API.</p>
          <pre class="code-container"><code class="language-python">
  <span class="code-comment">// Create a session</span>
  <span class="code-keyword">const</span> conn = <span class="code-keyword">await</span> npcs.<span class="code-function">connect();</span>

  <span class="code-comment">// Create a new order</span>
  <span class="code-keyword">const</span> order_id = <span class="code-keyword">await</span> npcs.<span class="code-function">newJob();</span>

  <span class="code-comment">// Upload a dataset from path</span>
  <span class="code-keyword">const</span> upload = <span class="code-keyword">await</span> npcs.<span class="code-function">uploadDatasetFromFileArray</span>({
    orderId: orderId,
    fileArray: dataset,
    callback: (info) => { <span class="code-comment">// optional progress callback</span>
      console.log(info);
    }
  });

  <span class="code-comment">// Start an order</span>
  <span class="code-keyword">const</span> order_start = <span class="code-keyword">await</span> npcs.<span class="code-function">runJob</span>({
      orderId: orderId
      productName: productName
    });

  <span class="code-comment">// Check order status</span>
  <span class="code-keyword">const</span> status = <span class="code-keyword">await</span> npcs.<span class="code-function">checkStatus</span>({
      orderId: orderId
    });

  <span class="code-comment">// Retrieve job results</span>
  <span class="code-keyword">const</span> results = <span class="code-keyword">await</span> npcs.<span class="code-function">getResults</span>({
      orderId: orderId
      format: predictionFormat,
      dataType: predictionDataType
    });
          </code></pre>
        </div>

        <div class="code-section">
          <h3>Example viewing a PNG result</h3>
          <p>Download a PNG result file and view it.</p>
          <pre class="code-container"><code class="language-javascript">
  <span class="code-comment">// Retrieve job results in 'PNG' format as a blob</span>
  <span class="code-keyword">const</span> results = <span class="code-keyword">await</span> npcs.<span class="code-function">getResults</span>({
      orderId: orderId
      format: <span class="code-string">"PNG"</span>,
      dataType: <span class="code-string">"blob"</span>
  });

  <span class="code-comment">// Create a link element</span>
  <span class="code-keyword">const</span> link = document.createElement(<span class="code-string">"a"</span>);
  link.href = URL.<span class="code-function">createObjectURL</span>(blob);
  link.download = filename;

  <span class="code-comment">// Append link to the body (needed for Firefox)</span>
  document.body.<span class="code-function">appendChild</span>(link);

  <span class="code-comment">// Trigger the download</span> 
  link.<span class="code-function">click</span>();

  <span class="code-comment">// Remove the link</span> 
  document.body.<span class="code-function">removeChild</span>(link);
              </code></pre>
            </section>
            </div>

        <section id="dicom-web">
          <div class="code-section">
            <h3>DICOMweb Integration</h3>
            <p>
              The API retrieves and processes images directly from
              DICOMweb-compliant servers, enabling neuropacs™ analysis for
              streamlined diagnostic workflows.
            </p>
            <pre class="code-container"><code class="language-python">
  <span class="code-comment">// Define DICOMweb parameters</span>
  <span class="code-keyword">const</span> dicomWebBaseUrl = <span class="code-string">"http://localhost:8080/dcm4chee-arc/aets/DCM4CHEE/rs"</span>
  <span class="code-keyword">const</span> studyUid = <span class="code-string">"1.3.12.2.1107.5.2.32.35162.30000022041820573832300000043"</span>
  <span class="code-keyword">const</span> username = <span class="code-string">"username"</span>
  <span class="code-keyword">const</span> password = <span class="code-string">"password"</span>

  <span class="code-comment">// Upload a dataset from DICOMweb</span>
  <span class="code-keyword">const</span> upload = <span class="code-keyword">await</span> npcs.<span class="code-function">uploadDatasetFromDicomWeb</span>({
    orderId: orderId,
    dicomWebBaseUrl: dicomWebBaseUrl,
    studyUid: studyUid,
    username: username,
    password: password,
    callback: (info) => { <span class="code-comment">// optional progress callback</span>
      console.log(info);
    }
  });
          </code></pre>
          </div>
        </section>
      </section>

      <section id="contact">
        <h2>Contact</h2>
        <p>
          Kerrick Cavanaugh (<em>Lead Software Engineer</em>) -
          kerrick@neuropacs.com
        </p>
      </section>

      <section id="license">
        <h2>License</h2>
        <p>
          This project is licensed under the
          <a
            href="https://github.com/neuropacs/neuropacs-py-api/blob/main/LICENSE"
            target="_blank"
            >MIT</a
          >.
        </p>
      </section>

      <section id="explore">
        <h2>Explore</h2>
        <h3>Integrations</h3>
        <p>
          Explore the different systems and software that our product integrates
          with. Click each integration for detailed setup and usage
          instructions.
        </p>
        <ul class="integration-list">
          <li>
            <a href="https://neuropacs.github.io/SlicerNeuropacs/">3D Slicer</a>
          </li>
          <li>
            <a href="#dicom-web">DICOMweb</a>
          </li>
          <!-- <li><a href="weasis.html">Weasis DICOM Viewer</a></li> -->
        </ul>
        <h3>Supported Programming Languages</h3>
        <p>
          Our product supports various programming languages to offer
          flexibility in development. Click each language for APIs, libraries,
          and examples.
        </p>
        <ul class="language-list">
          <li>
            <a href="https://neuropacs.github.io/neuropacs-py-api/"
              >Python API</a
            >
          </li>
          <li>
            <a href="https://neuropacs.github.io/neuropacs-java-api/"
              >Java API</a
            >
          </li>
          <li>
            <a href="https://neuropacs.github.io/neuropacs-cli/">CLI</a>
          </li>
        </ul>
      </section>

      <!-- <section id="faq">
        <h2>FAQ</h2>
        <p><strong>Q1:</strong> How do I contribute to this project?</p>
        <p>
          <strong>A1:</strong> Fork the repository and submit a pull request.
        </p>
      </section> -->
    </main>

    <footer class="footer">
      <p>&copy; 2024 neuropacs™. All rights reserved.</p>
    </footer>
  </body>
</html>
